import{_ as e,c as t,o as l,a0 as i}from"./chunks/framework.CUtHynuh.js";const u=JSON.parse('{"title":"连接参数","description":"","frontmatter":{"title":"连接参数","outline":"deep"},"headers":[],"relativePath":"mqtt/basic/connection.md","filePath":"mqtt/basic/connection.md"}'),r={name:"mqtt/basic/connection.md"};function o(h,a,n,s,c,d){return l(),t("div",null,a[0]||(a[0]=[i('<h1 id="连接参数" tabindex="-1">连接参数 <a class="header-anchor" href="#连接参数" aria-label="Permalink to &quot;连接参数&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#mqtt连接基础概念">MQTT连接基础概念</a><ul><li><a href="#连接建立过程">连接建立过程</a></li><li><a href="#传输协议">传输协议</a></li></ul></li><li><a href="#mqtt连接参数详解">MQTT连接参数详解</a><ul><li><a href="#连接地址">连接地址</a></li><li><a href="#客户端id">客户端ID</a></li><li><a href="#用户名与密码">用户名与密码</a></li><li><a href="#连接超时">连接超时</a></li><li><a href="#保活周期">保活周期</a></li><li><a href="#清除会话-clean-session">清除会话（Clean Session）</a></li><li><a href="#遗嘱消息">遗嘱消息</a></li><li><a href="#协议版本">协议版本</a></li><li><a href="#mqtt-5-0新增参数">MQTT 5.0新增参数</a></li></ul></li><li><a href="#建立安全的mqtt连接">建立安全的MQTT连接</a><ul><li><a href="#ssl-tls加密">SSL/TLS加密</a></li><li><a href="#单向认证">单向认证</a></li><li><a href="#双向认证">双向认证</a></li></ul></li></ul></nav><h2 id="mqtt连接基础概念" tabindex="-1">MQTT连接基础概念 <a class="header-anchor" href="#mqtt连接基础概念" aria-label="Permalink to &quot;MQTT连接基础概念&quot;">​</a></h2><h3 id="连接建立过程" tabindex="-1">连接建立过程 <a class="header-anchor" href="#连接建立过程" aria-label="Permalink to &quot;连接建立过程&quot;">​</a></h3><p>由客户端向服务器端发起，客户端发送CONNECT数据包，服务器收到后回复CONNACK数据包，收到CONNACK则连接成功，否则超时关闭连接。</p><h3 id="传输协议" tabindex="-1">传输协议 <a class="header-anchor" href="#传输协议" aria-label="Permalink to &quot;传输协议&quot;">​</a></h3><p>通常基于TCP/IP协议，也支持WebSocket或UDP传输。TCP稳定可靠；WebSocket适用于Web应用，方便浏览器端实现物联网应用。</p><h2 id="mqtt连接参数详解" tabindex="-1">MQTT连接参数详解 <a class="header-anchor" href="#mqtt连接参数详解" aria-label="Permalink to &quot;MQTT连接参数详解&quot;">​</a></h2><h3 id="连接地址" tabindex="-1">连接地址 <a class="header-anchor" href="#连接地址" aria-label="Permalink to &quot;连接地址&quot;">​</a></h3><p>包含服务器IP/域名、端口、连接协议。基于TCP时，普通连接端口1883，安全连接端口8883；基于WebSocket时，普通连接端口8083，安全连接端口8084，且需包含Path（如EMQX默认的/mqtt ）。</p><h3 id="客户端id" tabindex="-1">客户端ID <a class="header-anchor" href="#客户端id" aria-label="Permalink to &quot;客户端ID&quot;">​</a></h3><p>用于服务器识别客户端，需唯一，重复ID会踢掉已连接客户端。</p><h3 id="用户名与密码" tabindex="-1">用户名与密码 <a class="header-anchor" href="#用户名与密码" aria-label="Permalink to &quot;用户名与密码&quot;">​</a></h3><p>用于认证授权，未加密时明文传输，多数服务器默认匿名认证。</p><h3 id="连接超时" tabindex="-1">连接超时 <a class="header-anchor" href="#连接超时" aria-label="Permalink to &quot;连接超时&quot;">​</a></h3><p>客户端等待服务器连接确认的时长，超时则连接失败。</p><h3 id="保活周期" tabindex="-1">保活周期 <a class="header-anchor" href="#保活周期" aria-label="Permalink to &quot;保活周期&quot;">​</a></h3><p>客户端定时向服务端发送心跳报文的时间间隔，防止连接被断开。</p><h3 id="清除会话-clean-session" tabindex="-1">清除会话（Clean Session） <a class="header-anchor" href="#清除会话-clean-session" aria-label="Permalink to &quot;清除会话（Clean Session）&quot;">​</a></h3><p>false时创建持久会话，保存离线消息；true时创建临时会话，断开即销毁。</p><h3 id="遗嘱消息" tabindex="-1">遗嘱消息 <a class="header-anchor" href="#遗嘱消息" aria-label="Permalink to &quot;遗嘱消息&quot;">​</a></h3><p>客户端异常下线时，服务器发布其设置的遗嘱消息，包含Topic、Payload等信息。</p><h3 id="协议版本" tabindex="-1">协议版本 <a class="header-anchor" href="#协议版本" aria-label="Permalink to &quot;协议版本&quot;">​</a></h3><p>常用版本有MQTT v3.1、MQTT v3.1.1及MQTT v5.0，推荐使用MQTT 5.0。</p><h3 id="mqtt-5-0新增参数" tabindex="-1">MQTT 5.0新增参数 <a class="header-anchor" href="#mqtt-5-0新增参数" aria-label="Permalink to &quot;MQTT 5.0新增参数&quot;">​</a></h3><p>Clean Start指定创建新会话还是复用旧会话；Session Expiry Interval指定断开连接后会话的过期时间；还引入连接属性增强协议扩展性。</p><h2 id="建立安全的mqtt连接" tabindex="-1">建立安全的MQTT连接 <a class="header-anchor" href="#建立安全的mqtt连接" aria-label="Permalink to &quot;建立安全的MQTT连接&quot;">​</a></h2><h3 id="ssl-tls加密" tabindex="-1">SSL/TLS加密 <a class="header-anchor" href="#ssl-tls加密" aria-label="Permalink to &quot;SSL/TLS加密&quot;">​</a></h3><p>解决通信安全风险，保证消息密文传输，防止篡改。</p><h3 id="单向认证" tabindex="-1">单向认证 <a class="header-anchor" href="#单向认证" aria-label="Permalink to &quot;单向认证&quot;">​</a></h3><p>验证服务器证书，常与其他认证机制结合。</p><h3 id="双向认证" tabindex="-1">双向认证 <a class="header-anchor" href="#双向认证" aria-label="Permalink to &quot;双向认证&quot;">​</a></h3><p>服务端和客户端都需提供证书进行身份认证，适用于高安全要求场景，但浏览器端MQTT over WebSocket暂不支持。</p>',33)]))}const T=e(r,[["render",o]]);export{u as __pageData,T as default};
